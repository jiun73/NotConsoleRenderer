@0
MOV RIGHT ACC
JEZ 0
SUB 90
JEZ 90
SUB 90
JEZ 180
SUB 90
JEZ 270
0:MOV 1 RIGHT
JRO -99
90:MOV 7 RIGHT
JRO -99
180: MOV 3 RIGHT
JRO -99
270:MOV 10 RIGHT

@1
MOV UP LEFT
JRO LEFT
0:MOV UP DOWN
JMP DE
180:MOV UP ACC
NEG
MOV ACC DOWN
JMP DE
90:MOV -1 RIGHT
MOV UP RIGHT
JMP RE
270:MOV UP RIGHT
RE:MOV RIGHT NIL
JRO -99
DE:MOV DOWN NIL

@2
MOV LEFT ACC
JLZ -
JMP E
-:MOV LEFT ACC
NEG
E:MOV ACC RIGHT
MOV RIGHT LEFT

@3
MOV LEFT ACC
JLZ N
SUB 1
MOV ACC DOWN
+:MOV 1 DOWN
SUB 1
JGZ +
JMP E
N:NEG
SUB 1
MOV ACC DOWN
-:MOV -1 DOWN
SUB 1
JGZ -
E:MOV DOWN LEFT

@4
MOV RIGHT ACC
JLZ N
SUB 1
MOV ACC RIGHT
+:MOV 1 RIGHT
SUB 1
JGZ +
JRO -99
N:NEG
SUB 1
MOV ACC RIGHT
-:MOV -1 RIGHT
SUB 1
JGZ -

@5
MOV UP LEFT
MOV LEFT ACC
MOV 0 RIGHT
MOV 0 RIGHT
MOV RIGHT DOWN
MOV RIGHT DOWN

L:MOV LEFT RIGHT
  MOV 0 RIGHT
  MOV RIGHT DOWN
  MOV RIGHT DOWN
  SUB 1
JGZ L
MOV NIL UP

@6
ADD ANY
SWP
ADD ANY
SWP
MOV ACC LAST
SWP
MOV ACC LAST
SWP

@7
MOV UP ACC
MOV 0 LEFT
MOV 0 LEFT
MOV LEFT DOWN
MOV LEFT DOWN

L:MOV 0 LEFT
  MOV UP LEFT
  MOV LEFT DOWN
  MOV LEFT DOWN
  SUB 1
JGZ L
MOV NIL UP

@8
MOV UP RIGHT

@9
MOV ANY DOWN
MOV ANY DOWN
MOV 3 DOWN
MOV -1 DOWN

@10
MOV UP LEFT