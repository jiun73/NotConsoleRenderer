@0
L:MOV UP ACC
MOV ACC DOWN
MOV 0 DOWN
JGZ L
RR:MOV NIL RIGHT
R:MOV 3 ACC
L2:JRO RIGHT
SUB 1
JEZ R
JMP L2
E:SUB 1
MOV 0 DOWN
JGZ E
JMP RR

@1
MOV LEFT NIL
L:MOV 0 DOWN
MOV DOWN RIGHT
MOV RIGHT ACC
JGZ EQ

MOV 4 LEFT #RESET
MOV LEFT NIL
JMP L

EQ:MOV 1 LEFT#NEXT
JMP L

@2
S:MOV UP ACC
S2:MOV ACC RIGHT
MOV LEFT RIGHT
SWP
MOV RIGHT ACC
MOV ACC LEFT
MOV ACC DOWN
JGZ S
MOV DOWN ACC
ADD 3
MOV ACC DOWN
JEZ S
SWP
JMP S2

@3
MOV LEFT ACC
SUB LEFT
JNZ NEQ

EQ:MOV 1 LEFT
JRO -99

NEQ:MOV 0 LEFT
MOV 0 ACC





#COMPARATOR

@4
MOV ANY ACC
JGZ SAVE
MOV -1 DOWN
JLZ SEND
MOV RIGHT NIL
MOV RIGHT ACC
SWP
MOV ACC DOWN
SWP
JMP SAVE
SEND:SWP
MOV ACC DOWN
MOV RIGHT ACC
SAVE:SAV

@5
MOV ANY ACC
JGZ SAVE
MOV -1 LEFT
JLZ SEND
MOV DOWN NIL
MOV DOWN ACC
SWP
MOV ACC LEFT
SWP
MOV ACC UP
JMP SAVE
SEND:SWP
MOV ACC LEFT
MOV DOWN ACC
SAVE:SAV

@6
S:MOV UP ACC
JGZ EQ
MOV -1 RIGHT
MOV RIGHT UP
MOV UP ACC
JGZ NF
JMP NF2
EQ:MOV ACC RIGHT
MOV -1 RIGHT
MOV RIGHT ACC
ADD 3
MOV ACC DOWN
JRO -99
NF2:MOV 0 DOWN
NF:MOV 0 RIGHT

@7
MOV LEFT ACC
JGZ ADD
JLZ GET
JEZ RESET
RESET:MOV 0 ACC
JMP SAV
ADD:SWP
ADD 1
JMP SAV
GET:SWP
SUB 3
MOV ACC LEFT
JEZ SAV
ADD 3
SAV:SAV

@8
MOV UP RIGHT

@9
MOV LEFT ACC
JGZ SAVE
MOV -1 UP
JLZ SEND
MOV LEFT NIL
MOV LEFT ACC
SWP
MOV ACC UP
SWP
JMP SAVE
SEND:SWP
MOV ACC UP
MOV LEFT ACC
SAVE:SAV

@10
MOV UP ACC
JGZ G
0:MOV 0 DOWN
JRO -99
G:SUB 3
JEZ F
JMP 0
F:MOV 1 DOWN